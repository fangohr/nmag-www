restindex
    crumb: Debian package
    format: rest
    page-title: nmag installation instructions for debian
    include: Yes
    page-description:
      nmag installation instructions for debian systems
    /description
    build: Yes
/restindex

Installing nmag on a debian based Linux system
==============================================

Generic instructions
--------------------

To assist easy installation (and de-installation) on debian-based
Linux systems (such as Ubuntu, Knoppix, or plain Debian), we provide
(at present, i386 binary-only) packages that contain the nmag library
and the nsim framework. These can either be obtained directly from 
`http://nmag.soton.ac.uk/debian/dists/stable/unofficial/binary-i386/ <http://nmag.soton.ac.uk/debian/dists/stable/unofficial/binary-i386/>`__ and installed manually 
(using ``dpkg -i [packagefile.deb]``).

Alternatively, one may add the following line to ``/etc/apt/sources.list``::

  deb http://nmag.soton.ac.uk/debian/ stable unofficial

Then, an:: 

  $ aptitude update

(or ``apt-get update``), followed by:: 

  $ aptitude install nsim

(or ``apt-get install nsim``) will suffice 
to install the system (and resolve all the dependencies).


Notes for Ubuntu
----------------

Nsim employs the PETSc library, which provides parallelizable linear
algebra. Unfortunately, Ubuntu's libpetsc package appears to be
broken. Trying to install and start nsim on Ubuntu 7.10 (Gutsy Gibbon)
gives this error message::

  $ nsim
  /usr/bin/pyfem: symbol lookup error: /usr/lib/libpetsc.so.2.3.2:
  undefined symebl: queue

We have contacted the Ubuntu developers and asked to resolve this
issue. In the mean time, one workaround that reportedly works is to
replace the Ubuntu libpetsc package with Debian's. (Installing Debian
packages in Ubuntu seems to be somewhat frowned upon by Ubuntu
developers, but in this particular case it should be harmless.)

To do so, first download the debian libpetsc package from this URL:

http://ftp.debian.org/debian/pool/main/p/petsc/libpetsc2.3.2_2.3.2-1_i386.deb

Then, as root, give the command::

  $ dpkg -i libpetsc2.3.2_2.3.2-1_i386.deb

to replace your Ubuntu libpetsc package by its Debian cousin. While 
this should not upset anything on your system, you can, however,
nevertheless revert this change any time by giving the command::

  $ aptitude reinstall libpetsc2.3.2


Installing the developer version
--------------------------------

Note: if you have a beta-tester password, you may gain access to the
most recent developer debian package by using the following line instead::

 deb http://user:password@nmag.soton.ac.uk/debian/ unstable unofficial

(Strictly speaking, this works but violates RFC1738.)
